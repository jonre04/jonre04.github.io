<!doctype html>
<html>
	<head>
		<title>Pedido2</title>
		<meta name="viewport" content="width=device-width, initial scale=1.0">
		<link rel="stylesheet" href="css/pedido2.css">
	</head>
	<body>
		<header>
			<img src="img/logoa.png" alt="logoa">
			<h1>RUN & GO</h1>
		</header>
		<div class="respmenu">
			<input type="checkbox" id="menu-toggle">
			<label for="menu-toggle" class="menu-icon">
				<i class="fas fa-bars"></i> 
				<i class="fas fa-times"></i> 
			</label>
		<nav class="menu">
			<ul>
				<li><a href="index.html">Inicio</a></li>
				<li><a href="catalogo.html">Catalogo</a></li>
				<li><a href="ropa.html">Ropa</a></li>
				<li><a href="zapatillas.html">Zapatillas</a></li>
				<li><a href="accesorios.html">Accesorios</a></li>
				<li><a href="carrito.html">Carrito de Compra</a></li>
        <li><a href="pedido.html"> Pedido</a></li>
        <li><a href="contacto.html"> Contacto</a></li>
			</ul>
		</nav>
		</div>
    <main>
      <h2>Carrito de Compra</h2>
      <table id="cartTable">
          <tr>
              <th>Producto</th>
              <th>Cantidad</th>
              <th>Precio</th>
              <th>Total</th>
              <th>Eliminar</th>
          </tr>
      </table>
      <button class="checkout-button" onclick="proceedToCheckout()">Ir al Pedido</button>
  </main>
            <button><a href="carrito.html"></button>
            <button class="checkout-button">Cambia tus Productos</button>
            <aside>
            <<h2>Pedido</h2>
			<h3>Tus Datos</h3>
            <form id="pedidoForm"></form>
            <table border="i">
                <tr>
                    <td>Nombre</td>
                    <td><input type="text" name="nombre" required></td>
                </tr>
                <tr>
                    <td>Apellidos</td>
                    <td><input type="text" name="apellidos"required></td>
                </tr>
                <tr>
                    <td>email</td>
                    <td><input type="text" name="email"required></td>
                </tr>
                <tr>
                    <td>nº de telefono</td>
                    <td><input type="text" name="nºTelefono"required></td>
                </tr>
                <tr>
                    <td>Direccion de Envio</td>
                    <td><input type="text" name="dirección de envio"required></td>
                </tr>
                <tr>
                    <td>localidad</td>
                    <td><input type="text" name="localidad" required></td>
                </tr>
                <tr>
                    <td>Codigo Postal</td>
                    <td><input type="text" name="codigo postal" required></td>
                </tr>
                <tr>
                    <td>Provincia</td>
                    <td><input type="text" name="probincia" required></td>
                </tr>
            </table>
               
                </tr>
                <button><a href="pedido.html"></button>
                    <button class="checkout-button">Cambia tus Datos</button>
            </table>
        </aside>
        <a href="pedido3.html">
            <button class="checkout-button">Siguiente</button>
        </a>
        </main>
        
			
        <footer>
			<p>&copy; @2024 [RUN&GO]. Todos los derechos reservados.</p>
		</footer>
        <script>
            function saveFormData() {
                let form = document.getElementById('pedidoForm');
                let formData = {
                    nombre: form['nombre'].value,
                    apellidos: form['apellidos'].value,
                    email: form['email'].value,
                    telefono: form['nºTelefono'].value,
                    direccion: form['dirección de envio'].value,
                    localidad: form['localidad'].value,
                    codigoPostal: form['codigo postal'].value,
                    provincia: form['probincia'].value
                };
        
                // Guardar los datos en el localStorage
                localStorage.setItem('pedidoData', JSON.stringify(formData));
            }
        
            function loadFormData() {
                let formData = JSON.parse(localStorage.getItem('pedidoData'));
                if (formData) {
                    document.querySelector('[name="nombre"]').value = formData.nombre || '';
                    document.querySelector('[name="apellidos"]').value = formData.apellidos || '';
                    document.querySelector('[name="email"]').value = formData.email || '';
                    document.querySelector('[name="nºTelefono"]').value = formData.telefono || '';
                    document.querySelector('[name="dirección de envio"]').value = formData.direccion || '';
                    document.querySelector('[name="localidad"]').value = formData.localidad || '';
                    document.querySelector('[name="codigo postal"]').value = formData.codigoPostal || '';
                    document.querySelector('[name="probincia"]').value = formData.provincia || '';
                }
            }
        
            function validateForm() {
                // Obtener todos los campos del formulario
                let form = document.getElementById("pedidoForm");
                let inputs = form.getElementsByTagName("input");
                let valid = true;
                
                // Verificar si algún campo está vacío
                for (let i = 0; i < inputs.length; i++) {
                    if (inputs[i].value.trim() === "") {
                        valid = false;
                        alert("Por favor, completa todos los campos antes de continuar.");
                        break;
                    }
                }
        
                // Si todos los campos están completos, guardar los datos y redirigir
                if (valid) {
                    saveFormData();  // Guardar los datos antes de ir al siguiente paso
                    window.location.href = "pedido2.html"; // Redirigir a la siguiente página
                }
            }
        
            window.onload = function() {
                loadCart();  // Cargar los productos al cargar la página
                loadFormData();  // Cargar los datos del pedido
            };
        </script>
        
	</body>
</html>
